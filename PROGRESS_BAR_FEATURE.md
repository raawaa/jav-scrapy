# 进度条功能说明

## 功能描述

当用户使用 `-l` 或 `--limit` 参数指定下载影片数量时，程序会在命令行显示一个美观的进度条，实时显示下载进度。

## 使用方法

```bash
# 下载5部影片并显示进度条
node dist/jav.js --limit 5

# 搜索关键词并下载10部影片，显示进度条
node dist/jav.js --search "关键词" --limit 10

# 使用代理下载3部影片，显示进度条
node dist/jav.js --proxy http://127.0.0.1:8087 --limit 3
```

## 进度条特性

- **实时更新**: 每成功抓取一部影片后立即更新进度
- **详细信息**: 显示当前进度百分比、已完成数量/总数量、预计剩余时间
- **美观界面**: 使用Unicode字符显示进度条，支持中文提示
- **优雅退出**: 支持Ctrl+C中断，会正确清理进度条资源
- **智能显示**: 只有设置了limit参数时才显示进度条，否则使用传统日志模式

## 进度条格式

```
下载进度 |████████████░░░░░░░░| 60% | 3/5 部影片 | 剩余: 45s
```

## 技术实现

- 使用 `cli-progress` 库实现命令行进度条
- 集成到现有的事件系统中，通过 `DETAIL_PAGE_PROCESSED` 事件更新进度
- 添加了资源清理机制，确保程序正常或异常退出时都能正确停止进度条
- 保持向后兼容，不影响现有的日志输出功能

## 依赖

- cli-progress: ^3.x.x
- @types/cli-progress: ^3.x.x