# ğŸ¬ jav-scrapy

ä¸€ä¸ªå¯ä»¥çˆ¬å– AV ç£åŠ›é“¾æ¥æˆ–å½±ç‰‡å°é¢çš„å°çˆ¬è™«ã€‚

ğŸš€ **ä¸»è¦åŠŸèƒ½**ï¼š
- æŠ“å– AV å½±ç‰‡çš„ç£åŠ›é“¾æ¥ã€å½±ç‰‡ä¿¡æ¯å¹¶ä¿å­˜ä¸º JSON æ–‡ä»¶ã€‚
- æŠ“å–å½±ç‰‡çš„å°é¢å›¾ç‰‡å¹¶ä¿å­˜åˆ°æœ¬åœ°ã€‚
- æ”¯æŒå…³é”®è¯æœç´¢åŠŸèƒ½ï¼Œå¯æ ¹æ®å…³é”®è¯è¿‡æ»¤å½±ç‰‡ã€‚
- æ”¯æŒå¹¶å‘ä¸‹è½½ï¼Œå¯è‡ªå®šä¹‰å¹¶å‘æ•°ã€‚
- æ”¯æŒä»£ç†æœåŠ¡å™¨é…ç½®ã€‚

ğŸ“ **TODO**:
- [ ] å®ç°ç±»ä¼¼gitçš„å­å‘½ä»¤æ¨¡å¼ï¼Œä¾‹å¦‚ï¼š
    - `jav search <æœç´¢å…³é”®å­—>`æœç´¢å†…å®¹å¹¶æŠ“å–ï¼›
    - `jav cat <ç±»å‹>`æŠ“å–ç‰¹å®šç±»å‹å½±ç‰‡ï¼›
    - `jav act <å¥³ä¼˜åå­—>`æŠ“å–ç‰¹å®šå¥³ä¼˜å½±ç‰‡ã€‚

## âš™ï¸ å®‰è£…

âœ¨**Windowsç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨è‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬`install.bat`å‚»ç“œå¼å®‰è£…ã€‚**

å¦åˆ™è¯·ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ‰‹åŠ¨å®‰è£…ï¼š

### æ‰‹åŠ¨å®‰è£…

#### ğŸ”§ å¿…è¦ç¯å¢ƒ

- **Node.js ç¯å¢ƒ**ï¼šç”±äºè¯¥å·¥å…·æ˜¯é€šè¿‡ `npm` è¿›è¡Œå…¨å±€å®‰è£…çš„ï¼Œæ‰€ä»¥éœ€è¦ç³»ç»Ÿå·²ç»å®‰è£…äº† Node.jsã€‚ä½ å¯ä»¥ä» [Node.js å®˜æ–¹ç½‘ç«™](https://nodejs.org/) ä¸‹è½½å¹¶å®‰è£…é€‚åˆä½ æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯ Node.js å’Œ `npm` æ˜¯å¦å®‰è£…æˆåŠŸï¼š

```bash
$ node --version
$ npm --version
```

- **TypeScript ç¯å¢ƒ**ï¼šç”±äºè¯¥åº“æ˜¯ä½¿ç”¨ TypeScript ç¼–å†™çš„ï¼Œéœ€è¦å®‰è£… TypeScript ç¼–è¯‘å™¨ã€‚ä½ å¯ä»¥é€šè¿‡ `npm` å…¨å±€å®‰è£… TypeScriptï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š

```bash
$ npm install -g typescript
```

å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯ TypeScript æ˜¯å¦å®‰è£…æˆåŠŸï¼š

```bash
$ tsc --version
```

#### ğŸ› ï¸ ç¼–è¯‘å®‰è£…æœ¬ç¨‹åº

```bash
# å…‹éš†ä»“åº“
$ git clone https://github.com/qiusli/jav-scrapy.git

# è¿›å…¥é¡¹ç›®ç›®å½•
$ cd jav-scrapy

# å®‰è£…ä¾èµ–
$ npm install

# ç¼–è¯‘ TypeScript ä»£ç 
$ npm run build

# å®‰è£…å…¨å±€å‘½ä»¤
$ npm install -g . --force
```



## ğŸš€ ä½¿ç”¨æ–¹æ³•

```bash
# åŸºæœ¬ç”¨æ³•
$ jav

# å¸¸ç”¨é€‰é¡¹
$ jav -p 5 -t 60000 -o ~/downloads/magnets

# æœç´¢ç‰¹å®šå½±ç‰‡
$ jav -s "å½±ç‰‡å…³é”®è¯"

# ä½¿ç”¨ä»£ç†æœåŠ¡å™¨
$ jav -x http://127.0.0.1:8087

# ä¸æŠ“å–å›¾ç‰‡
$ jav -N

# æŠ“å–æ‰€æœ‰ç£é“¾ï¼ˆé»˜è®¤åªæŠ“å–æœ€å¤§ä½“ç§¯çš„ç£é“¾ï¼‰
$ jav -a
```

## âŒ¨ï¸ å‘½ä»¤è¡Œé€‰é¡¹è¯´æ˜


| é€‰é¡¹                 | è¯´æ˜                                     |
| ---------------------- | ------------------------------------------ |
| -p, --parallel<num>  | è®¾ç½®å¹¶å‘è¿æ¥æ•°ï¼ˆé»˜è®¤ï¼š2ï¼‰                |
| -t, --timeout<num>   | è®¾ç½®è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼Œé»˜è®¤ï¼š30000ï¼‰    |
| -o, --output<path>   | è®¾ç½®ç»“æœä¿å­˜è·¯å¾„ï¼ˆé»˜è®¤ï¼šå½“å‰å·¥ä½œç›®å½•ï¼‰      |
| -s, --search<string> | æœç´¢å…³é”®è¯                               |
| -b, --base<url>      | è‡ªå®šä¹‰èµ·å§‹é¡µURL                          |
| -x, --proxy<url>     | ä½¿ç”¨ä»£ç†æœåŠ¡å™¨                           |




## ğŸ“Œ Notes

- æœ¬ç¨‹åºè‡³æŠ“å–æ‰€æœ‰ç£é“¾ä¸­ï¼Œä½“ç§¯æœ€å¤§çš„ç£é“¾ã€‚

### â—å¦‚ä½•æ›´æ¢é˜²å±è”½åœ°å€

åœ¨ `src/core/config.ts` æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹ç›¸åº”çš„é…ç½®å†…å®¹å¹¶é‡æ–°ç¼–è¯‘å®‰è£…ï¼š

```typescript
    constructor() {
        this.config = {
            DEFAULT_TIMEOUT: 30000,
            BASE_URL: 'https://www.fanbus.ink',
            searchUrl:'/search',
            parallel: 2,
            headers: {
                Referer: 'https://www.fanbus.ink/',
                Cookie: 'existmag=mag'
            },
            output: path.join(userHome, 'magnets'),
            search: null,
            base: null,
            nomag: false,
            allmag: false,
            nopic: false
        };
```

æˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ `-b` é€‰é¡¹æŒ‡å®šè‡ªå®šä¹‰èµ·å§‹é¡µURLï¼š


```bash
$ jav -b https://www.fanbus.ink/
```

## ğŸ‘¥ Contributors

- [@qiusli](https://github.com/qiusli)
- [@Eddie104](https://github.com/Eddie104)
- [@leongfeng](https://github.com/leongfeng)
