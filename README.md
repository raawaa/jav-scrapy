# ğŸ¬ jav-scrapy

ä¸€ä¸ªåŸºäº TypeScript çš„é«˜æ€§èƒ½ JAV å†…å®¹çˆ¬è™«ï¼Œé‡‡ç”¨å¤šé˜Ÿåˆ—æ¶æ„ï¼Œå…·æœ‰é˜²å±è”½åŠŸèƒ½å’Œå¹¶å‘å¤„ç†èƒ½åŠ›ã€‚


## âœ¨ ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **å››é˜¶æ®µæµæ°´çº¿æ¶æ„**: å››ä¸ªå¼‚æ­¥é˜Ÿåˆ—ç³»ç»Ÿï¼Œæ”¯æŒå¹¶å‘å¤„ç†
- **å…ƒæ•°æ®æå–**: è‡ªåŠ¨æå–å½±ç‰‡å…ƒæ•°æ®ã€åˆ†ç±»å’Œæ¼”å‘˜ä¿¡æ¯
- **ç£åŠ›é“¾æ¥çˆ¬å–**: ä½¿ç”¨ AJAX å¤„ç†ç£åŠ›é“¾æ¥æå–
- **å¹¶å‘å›¾åƒä¸‹è½½**: å¸¦ referer å¤´çš„æµ·æŠ¥å›¾ç‰‡ä¸‹è½½

### é˜²å±è”½èƒ½åŠ›
- **ä»£ç†æ”¯æŒ**: è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨ç³»ç»Ÿä»£ç† (HTTP/HTTPS/SOCKS)
- **URL è½®æ¢**: ä»æœ¬åœ° URL ç¼“å­˜ä¸­éšæœºé€‰æ‹©ä»¥é¿å…å°ç¦
- **Cloudflare ç»•è¿‡**: å¯é€‰çš„åŸºäº Puppeteer çš„å¹´é¾„éªŒè¯ç»•è¿‡
- **User-Agent è½®æ¢**: ä½¿ç”¨ç°ä»£ Chrome å¤´çš„åŠ¨æ€è½®æ¢
- **Cookie ç®¡ç†**: è‡ªåŠ¨ Cookie éªŒè¯å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†

### æ€§èƒ½ä¸å¯é æ€§
- **å¹¶å‘å¤„ç†**: å¯é…ç½®çš„ä¸åŒæ“ä½œå¹¶å‘çº§åˆ«
- **æŒ‡æ•°é€€é¿**: ç½‘ç»œé”™è¯¯çš„ 1.5x é€€é¿é‡è¯•æœºåˆ¶
- **è¿›åº¦è·Ÿè¸ª**: å®æ—¶è¿›åº¦æ¡å’Œé˜Ÿåˆ—ç›‘æ§
- **è¶…æ—¶ä¿æŠ¤**: å¡ä½è¿›ç¨‹çš„ 10 åˆ†é’Ÿå¼ºåˆ¶å…³é—­
- **ç»“æ„åŒ–æ—¥å¿—**: Winston åŸºç¡€çš„å¤šçº§æ—¥å¿—ç³»ç»Ÿ

## ğŸ“‹ ç›®å½•

- [ç³»ç»Ÿè¦æ±‚](#-ç³»ç»Ÿè¦æ±‚)
- [å®‰è£…](#-å®‰è£…)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ä½¿ç”¨æ–¹æ³•](#-ä½¿ç”¨æ–¹æ³•)
- [é…ç½®é€‰é¡¹](#-é…ç½®é€‰é¡¹)
- [æ¶æ„æ¦‚è¿°](#-æ¶æ„æ¦‚è¿°)
- [å¼€å‘è®¾ç½®](#-å¼€å‘è®¾ç½®)
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

## âš™ï¸ ç³»ç»Ÿè¦æ±‚

### å¿…éœ€è½¯ä»¶

| ç»„ä»¶ | æœ€ä½ç‰ˆæœ¬ | æ¨èç‰ˆæœ¬ |
|------|----------|----------|
| **Node.js** | 16.x æˆ–æ›´é«˜ | 18.x LTS æˆ–æ›´é«˜ |
| **npm** | 8.x æˆ–æ›´é«˜ | æœ€æ–° (10.x+) |
| **æ“ä½œç³»ç»Ÿ** | Windows 10+, macOS 10.14+, æˆ– Linux | æœ€æ–°ç¨³å®šç‰ˆ |

### Puppeteer ä¾èµ–

Puppeteer (ç”¨äº Cloudflare ç»•è¿‡) éœ€è¦é¢å¤–çš„ç³»ç»Ÿåº“ï¼š

#### Ubuntu/Debian
```bash
sudo apt-get update
sudo apt-get install -y \
  gconf-service libasound2 libatk1.0-0 \
  libcairo2 libcups2 libdbus-1-3 \
  libexpat1 libfontconfig1 libgcc1 \
  libgconf-2-4 libgdk-pixbuf2.0-0 \
  libglib2.0-0 libgtk-3-0 libnspr4 \
  libpango-1.0-0 libpangocairo-1.0-0 \
  libstdc++6 libx11-6 libx11-xcb1 libxcb1 \
  libxcomposite1 libxcursor1 libxdamage1 libxext6 \
  libxfixes3 libxi6 libxrandr2 libxrender1 \
  libxss1 libxtst6 ca-certificates fonts-liberation \
  libappindicator1 libnss3 lsb-release xdg-utils \
  wget
```

#### CentOS/RHEL/Fedora
```bash
sudo yum install -y \
  atk cups-libs gtk3 libdrm libXcomposite \
  libXcursor libXdamage libXext libXi libXrandr \
  libXScrnSaver libXss libXtst pango \
  xorg-x11-fonts-Type1 xorg-x11-fonts-misc \
  alsa-lib GConf2 nss
```

#### macOS
æ— éœ€é¢å¤–ä¾èµ– (Puppeteer ä¸‹è½½ Chromium)ã€‚

#### Windows
Windows 10+ æ— éœ€é¢å¤–ä¾èµ–ã€‚

### å†…å­˜è¦æ±‚

- **æœ€ä½å†…å­˜**: 512 MB å¯ç”¨å†…å­˜
- **æ¨èå†…å­˜**: 2 GB ç”¨äºé«˜å¹¶å‘æ€§èƒ½
- **ç£ç›˜ç©ºé—´**: 100 MB åº”ç”¨ç¨‹åºç©ºé—´ï¼ŒåŠ ä¸Šä¸‹è½½å†…å®¹æ‰€éœ€ç©ºé—´

## âš™ï¸ å®‰è£…

### ğŸ‰ æ–°ç‰¹æ€§ï¼šé¢„ç¼–è¯‘ç‰ˆæœ¬

ä» v1.0.0 å¼€å§‹ï¼Œé¡¹ç›®æä¾›**é¢„ç¼–è¯‘ç‰ˆæœ¬**ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ä» GitHub å®‰è£…ï¼Œæ— éœ€æœ¬åœ° TypeScript ç¯å¢ƒæˆ–æ„å»ºè¿‡ç¨‹ï¼

### ç›´æ¥å®‰è£… (æ¨è)

ç›´æ¥ä» GitHub å®‰è£…é¢„ç¼–è¯‘ç‰ˆæœ¬ï¼š

```bash
# ç›´æ¥ä» GitHub å®‰è£…ï¼ˆåŒ…å«é¢„ç¼–è¯‘çš„ JavaScript æ–‡ä»¶ï¼‰
npm install -g raawaa/jav-scrapy

# ç°åœ¨å¯ä»¥ä»ä»»ä½•åœ°æ–¹ä½¿ç”¨ 'jav' å‘½ä»¤
jav --help
```

> **æ³¨æ„**: ä» v1.0.0 å¼€å§‹ï¼Œdist ç›®å½•ä¼šè¢«åŒ…å«åœ¨å‘å¸ƒåŒ…ä¸­ï¼Œç¡®ä¿ç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨é¢„ç¼–è¯‘ç‰ˆæœ¬ã€‚

**ä¼˜åŠ¿**ï¼š
- âœ… æ— éœ€ TypeScript ç¯å¢ƒ
- âœ… æ— éœ€æœ¬åœ°ç¼–è¯‘
- âœ… å®‰è£…é€Ÿåº¦æ›´å¿«
- âœ… å³è£…å³ç”¨

### ä½¿ç”¨ npx æœ¬åœ°ä½¿ç”¨

æ— éœ€å…¨å±€å®‰è£…ï¼Œç›´æ¥ä» GitHub è¿è¡Œé¢„ç¼–è¯‘ç‰ˆæœ¬ï¼š

```bash
# ä½¿ç”¨ npx è¿è¡Œ (æ— éœ€å®‰è£…ï¼ŒåŒ…å«é¢„ç¼–è¯‘æ–‡ä»¶)
npx raawaa/jav-scrapy --help
```

**ä¼˜åŠ¿**ï¼š
- ğŸš€ é›¶é…ç½®ï¼Œå³ç”¨å³èµ°
- ğŸ”§ æ— éœ€å®‰è£…å¼€å‘ä¾èµ–
- ğŸ“¦ è‡ªåŠ¨ä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬

### å¼€å‘æ¨¡å¼

ä½¿ç”¨ TypeScript ç›´æ¥è¿è¡Œ (æ— éœ€æ„å»º):

```bash
git clone https://github.com/raawaa/jav-scrapy.git
cd jav-scrapy
npm install

# å¼€å‘æ¨¡å¼è¿è¡Œ
npm run dev

# ç›‘æ§æ¨¡å¼ (æ–‡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨é‡å¯)
npm run dev:watch
```

> **æ³¨æ„**: æœ¬é¡¹ç›®æ‰€æœ‰å¼€å‘å·¥å…·éƒ½ä½œä¸ºæœ¬åœ°ä¾èµ–åŒ…ç®¡ç†ï¼Œé¿å…æ±¡æŸ“ç³»ç»Ÿç¯å¢ƒã€‚ä½¿ç”¨ `npx` è¿è¡Œæœ¬åœ°åŒ…ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

ä½¿ç”¨é»˜è®¤è®¾ç½®å¼€å§‹çˆ¬å–ï¼š

```bash
jav crawl
```

### é™åˆ¶å½±ç‰‡æ•°é‡

```bash
jav crawl --limit 100
```

### ä½¿ç”¨ä»£ç†

```bash
jav crawl --proxy http://proxy.example.com:8080
```

### å¯ç”¨ Cloudflare ç»•è¿‡

```bash
jav crawl --cloudflare
```

### è·³è¿‡å›¾ç‰‡ä¸‹è½½

```bash
jav crawl --nopic
```

### è·³è¿‡æ²¡æœ‰ç£åŠ›é“¾æ¥çš„å½±ç‰‡

```bash
jav crawl --nomag
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¯ç”¨å‘½ä»¤

```bash
# é»˜è®¤çˆ¬å–å‘½ä»¤
jav crawl [options]

# æ›´æ–°é˜²å±è”½ URLs ç¼“å­˜
jav update

# æ˜¾ç¤ºå¸®åŠ©
jav --help

# æ˜¾ç¤ºç‰ˆæœ¬
jav --version
```

### å¸¸ç”¨é€‰é¡¹

| é€‰é¡¹ | æè¿° | é»˜è®¤å€¼ |
|------|------|--------|
| `--limit <number>` | æœ€å¤§çˆ¬å–å½±ç‰‡æ•°é‡ (0 = æ— é™åˆ¶) | 0 |
| `--parallel <number>` | åŸºç¡€å¹¶å‘çº§åˆ« | 2 |
| `--delay <seconds>` | è¯·æ±‚é—´çš„åŸºç¡€å»¶è¿Ÿ | 2 |
| `--timeout <ms>` | è¯·æ±‚è¶…æ—¶æ—¶é—´ (æ¯«ç§’) | 30000 |
| `--proxy <url>` | ä»£ç† URL (å¦‚æœªæŒ‡å®šåˆ™è‡ªåŠ¨æ£€æµ‹) | - |
| `--cloudflare` | é€šè¿‡ Puppeteer å¯ç”¨ Cloudflare ç»•è¿‡ | false |
| `--nomag` | è·³è¿‡æ²¡æœ‰ç£åŠ›é“¾æ¥çš„å½±ç‰‡ | false |
| `--allmag` | è·å–æ‰€æœ‰ç£åŠ›é“¾æ¥ (ä¸ä»…ä»…æ˜¯æœ€å¤§çš„) | false |
| `--nopic` | è·³è¿‡å›¾ç‰‡ä¸‹è½½ | false |
| `--debug` | å¯ç”¨è°ƒè¯•æ—¥å¿— | false |

### é«˜çº§ç”¨æ³•ç¤ºä¾‹

#### ä½¿ç”¨è‡ªå®šä¹‰è®¾ç½®çˆ¬å–
```bash
jav crawl \
  --limit 500 \
  --parallel 3 \
  --delay 3 \
  --proxy http://user:pass@proxy.example.com:8080 \
  --cloudflare
```

#### å¼€å‘æ¨¡å¼ä¸‹çš„è°ƒè¯•æ—¥å¿—
```bash
npm run dev -- crawl --debug --limit 10
```

#### æ›´æ–°é˜²å±è”½ URLs
```bash
jav update
```

## ğŸ”§ é…ç½®

### é…ç½®ä¼˜å…ˆçº§

é…ç½®æŒ‰ä»¥ä¸‹é¡ºåºåŠ è½½ (ä»é«˜åˆ°ä½ä¼˜å…ˆçº§):

1. **CLI å‚æ•°** - å‘½ä»¤è¡Œæ ‡å¿—
2. **æœ¬åœ°ç¼“å­˜** - `~/.jav-scrapy-antiblock-urls.json`
3. **ç³»ç»Ÿä»£ç†** - ä»ç³»ç»Ÿè®¾ç½®è‡ªåŠ¨æ£€æµ‹
4. **é»˜è®¤å€¼** - å†…ç½®é»˜è®¤å€¼

### ä»£ç†é…ç½®

åº”ç”¨ç¨‹åºæ”¯æŒå¤šç§ä»£ç†ç±»å‹:

- **HTTP**: `http://proxy.example.com:8080`
- **HTTPS**: `https://proxy.example.com:8080`
- **SOCKS4**: `socks4://proxy.example.com:1080`
- **SOCKS5**: `socks5://proxy.example.com:1080`

å¸¦è®¤è¯çš„æ ¼å¼:
```bash
--proxy http://username:password@proxy.example.com:8080
```

### è‡ªåŠ¨ä»£ç†æ£€æµ‹

åº”ç”¨ç¨‹åºå¯ä»ä»¥ä¸‹æ¥æºè‡ªåŠ¨æ£€æµ‹ä»£ç†:
- **Windows**: æ³¨å†Œè¡¨ (WinHTTP, WinINet)
- **macOS**: ç³»ç»Ÿåå¥½è®¾ç½® (SCNetworkProxies)
- **Linux**: ç¯å¢ƒå˜é‡ (`http_proxy`, `https_proxy`, `all_proxy`)

## ğŸ—ï¸ æ¶æ„æ¦‚è¿°

### å››é˜¶æ®µæµæ°´çº¿

jav-scrapy ä½¿ç”¨å¤æ‚çš„å››é˜¶æ®µæµæ°´çº¿æ¶æ„:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ 1: ç´¢å¼•é¡µé¢ (1x å¹¶å‘)                                   â”‚
â”‚  - è·å–åˆ—è¡¨é¡µé¢                                               â”‚
â”‚  - è§£æå½±ç‰‡é“¾æ¥                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ 2: è¯¦æƒ…é¡µé¢ (0.75x å¹¶å‘)                                 â”‚
â”‚  - æå–å…ƒæ•°æ® (gid, uc, img, title)                           â”‚
â”‚  - è§£æåˆ†ç±»å’Œæ¼”å‘˜                                             â”‚
â”‚  - å‡†å¤‡æ–‡ä»¶å†™å…¥ä»»åŠ¡                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ 3: æ–‡ä»¶å†™å…¥ (2x)              â”‚  â”‚  é˜¶æ®µ 4: å›¾åƒ      â”‚
â”‚  - ä¿å­˜å½±ç‰‡æ•°æ®                     â”‚  â”‚  (0.5x)            â”‚
â”‚  - JSON/CSV è¾“å‡º                    â”‚  â”‚  - ä¸‹è½½æµ·æŠ¥        â”‚
â”‚  - é«˜ä¼˜å…ˆçº§                         â”‚  â”‚  - å¸¦ referers     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¹¶å‘çº§åˆ«

| é˜¶æ®µ | å¹¶å‘ | ç†ç”± |
|------|------|------|
| ç´¢å¼•é¡µé¢ | 1x (åŸºç¡€) | é¿å…å‹å®æœåŠ¡å™¨ |
| è¯¦æƒ…é¡µé¢ | 0.75x | ä¸­ç­‰å¤„ç†è´Ÿè½½ |
| æ–‡ä»¶å†™å…¥ | 2x | å¿«é€Ÿ I/O æ“ä½œ |
| å›¾åƒä¸‹è½½ | 0.5x | å¸¦å®½å¯†é›†ï¼Œä½ä¼˜å…ˆçº§ |

### æ ¸å¿ƒç»„ä»¶

- **QueueManager** (`src/core/queueManager.ts`): ç¼–æ’å››é˜¶æ®µæµæ°´çº¿
- **RequestHandler** (`src/core/requestHandler.ts`): å¸¦é‡è¯•å’Œä»£ç†æ”¯æŒçš„ HTTP å®¢æˆ·ç«¯
- **Parser** (`src/core/parser.ts`): åŸºäº Cheerio çš„ HTML è§£æå™¨ï¼Œå¸¦å›é€€ç­–ç•¥
- **PuppeteerPool** (`src/core/puppeteerPool.ts`): ç®¡ç† Cloudflare ç»•è¿‡çš„æµè§ˆå™¨å®ä¾‹
- **Config** (`src/core/config.ts`): å¤šæºé…ç½®ç®¡ç†

## ğŸ› ï¸ å¼€å‘è®¾ç½®

### å…ˆå†³æ¡ä»¶

- Node.js 16+ (æ¨è LTS)
- npm 8+
- Git

> **æ³¨æ„**: å¦‚æœæ‚¨åªæƒ³ä½¿ç”¨ jav-scrapy è€Œä¸éœ€è¦ä¿®æ”¹ä»£ç ï¼Œè¯·ä½¿ç”¨ä¸Šé¢çš„"ç›´æ¥å®‰è£…"æ–¹å¼ã€‚ä¸‹é¢çš„æ­¥éª¤ä»…é€‚ç”¨äºéœ€è¦å‚ä¸é¡¹ç›®å¼€å‘çš„å¼€å‘è€…ã€‚

### è®¾ç½®å¼€å‘ç¯å¢ƒ (ä»…é™å¼€å‘è€…)

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/raawaa/jav-scrapy.git
cd jav-scrapy

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æ¨¡å¼ (TypeScript ç›´æ¥è¿è¡Œ)
npm run dev

# æˆ–å¯åŠ¨ç›‘æ§æ¨¡å¼ (æ–‡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨é‡å¯)
npm run dev:watch

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# è¿è¡Œæµ‹è¯• (å¦‚æœå­˜åœ¨)
npm test
```

### å¼€å‘å‘½ä»¤

| å‘½ä»¤ | æè¿° |
|------|------|
| `npm run build` | å°† TypeScript ç¼–è¯‘åˆ° `dist/` ç›®å½• |
| `npm run dev` | ä½¿ç”¨ `ts-node` ç›´æ¥è¿è¡Œ TypeScript |
| `npm run dev:watch` | ä½¿ç”¨ `nodemon` ç›‘æ§æ–‡ä»¶å˜åŒ– |
| `npm test` | è¿è¡Œæµ‹è¯•å¥—ä»¶ (Mocha) |
| `npm run release` | è¿è¡Œè¯­ä¹‰åŒ–å‘å¸ƒè¿›è¡Œç‰ˆæœ¬ç®¡ç† |

### é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ jav.ts                     # CLI å…¥å£ç‚¹
â”œâ”€â”€ core/                      # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ config.ts             # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ constants.ts          # é»˜è®¤å€¼ï¼Œç”¨æˆ·ä»£ç†
â”‚   â”œâ”€â”€ fileHandler.ts        # æ–‡ä»¶æ“ä½œ
â”‚   â”œâ”€â”€ logger.ts             # Winston æ—¥å¿—
â”‚   â”œâ”€â”€ parser.ts             # HTML è§£æ
â”‚   â”œâ”€â”€ queueManager.ts       # å››é˜Ÿåˆ—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ requestHandler.ts     # å¸¦é‡è¯•çš„ HTTP å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ puppeteerPool.ts      # æµè§ˆå™¨å®ä¾‹æ± 
â”‚   â””â”€â”€ resourceMonitor.ts    # èµ„æºè·Ÿè¸ª
â”œâ”€â”€ types/
â”‚   â””â”€â”€ interfaces.ts         # TypeScript æ¥å£
â””â”€â”€ utils/
    â”œâ”€â”€ cloudflareBypass.ts   # Cloudflare ç»•è¿‡
    â”œâ”€â”€ delayManager.ts       # å»¶è¿Ÿæ§åˆ¶
    â”œâ”€â”€ errorHandler.ts       # é”™è¯¯åˆ†ç±»
    â””â”€â”€ systemProxy.ts        # ä»£ç†æ£€æµ‹
```

### TypeScript é…ç½®

- **ç›®æ ‡**: ES2020
- **æ¨¡å—**: CommonJS
- **è¾“å‡ºç›®å½•**: `dist/`
- **æºç ç›®å½•**: `src/`
- **ä¸¥æ ¼æ¨¡å¼**: å¯ç”¨

### ä»£ç é£æ ¼æŒ‡å—

- **æ— å…¨å±€ä¾èµ–**: æ‰€æœ‰å·¥å…·å¿…é¡»æ˜¯æœ¬åœ° npm ä¾èµ–
- ä½¿ç”¨ `npx` è¿è¡ŒåŒ…: `npx pkg` è€Œä¸æ˜¯ `pkg`
- **é”™è¯¯å¤„ç†**: é›†ä¸­åŒ–é”™è¯¯åˆ†ç±»
- **æ—¥å¿—è®°å½•**: Winston å¤šçº§æ—¥å¿—å¸¦è°ƒè¯•æ”¯æŒ
- **æ–‡ä»¶è·¯å¾„**: å§‹ç»ˆä½¿ç”¨ç»å¯¹è·¯å¾„

### æäº¤è§„èŒƒ

é¡¹ç›®ä½¿ç”¨ç”± Husky å¼ºåˆ¶æ‰§è¡Œçš„çº¦å®šå¼æäº¤:

```
<type>(<scope>): <subject>
```

**ç±»å‹**: feat, fix, docs, style, refactor, perf, test, build, ci, chore

**ç¤ºä¾‹**:
```bash
git commit -m "feat(core): add proxy authentication support"
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### "Cannot find module" æˆ–å®‰è£…é—®é¢˜
```bash
# å¦‚æœç›´æ¥å®‰è£…å¤±è´¥ï¼Œè¯·ç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
npm install -g https://github.com/raawaa/jav-scrapy/tarball/main

# å¦‚æœä»æœ‰é—®é¢˜ï¼Œæ¸…é™¤ npm ç¼“å­˜åé‡è¯•
npm cache clean --force
npm install -g https://github.com/raawaa/jav-scrapy/tarball/main
```

#### Puppeteer ä¸‹è½½å¤±è´¥
```bash
# å®‰è£… Chromium ä¾èµ– (Linux)
sudo apt-get install -y gconf-service libasound2 libatk1.0-0

# æˆ–ä½¿ç”¨å¸¦ç³»ç»Ÿ Chrome çš„ puppeteer-core
# è®¾ç½® PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
```

#### ä»£ç†ä¸å·¥ä½œ
```bash
# éªŒè¯ä»£ç†æ ¼å¼
--proxy http://user:pass@host:port

# æ£€æŸ¥ä»£ç†æ˜¯å¦å¯è®¿é—®
curl -x http://proxy.example.com:8080 http://httpbin.org/ip
```

#### é«˜å¹¶å‘æ—¶çš„å†…å­˜é—®é¢˜
```bash
# å‡å°‘å¹¶å‘
--parallel 1

# æˆ–å‡å°‘å»¶è¿Ÿ
--delay 1
```

#### Cloudflare é˜»æ­¢è¯·æ±‚
```bash
# å¯ç”¨ Cloudflare ç»•è¿‡
--cloudflare

# å¢åŠ å»¶è¿Ÿ
--delay 5

# ä½¿ç”¨ä»£ç†
--proxy http://proxy.example.com:8080
```

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è°ƒè¯•æ—¥å¿—è·å–è¯¦ç»†ä¿¡æ¯:

```bash
jav crawl --debug --limit 10
```

æ—¥å¿—å°†åŒ…å«:
- é˜Ÿåˆ—çŠ¶æ€æ›´æ–°
- è¯·æ±‚/å“åº”è¯¦æƒ…
- è§£ææ“ä½œ
- é”™è¯¯è¿½è¸ª
- èµ„æºä½¿ç”¨æƒ…å†µ

## ğŸ‘¥ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤:

1. **Fork ä»“åº“**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**
   ```bash
   git checkout -b feature/your-feature-name
   ```
3. **è¿›è¡Œæ›´æ”¹**
4. **éµå¾ªæäº¤è§„èŒƒ**
   ```bash
   git commit -m "feat(scope): description"
   ```
5. **ç¡®ä¿æµ‹è¯•é€šè¿‡**
   ```bash
   npm test
   ```
6. **æäº¤ Pull Request**

### è´¡çŒ®å‡†åˆ™

- **æ— å…¨å±€ä¾èµ–** - ä¿æŒæ‰€æœ‰å·¥å…·ä¸ºæœ¬åœ° npm ä¾èµ–
- **éµå¾ª TypeScript ä¸¥æ ¼æ¨¡å¼** - æ‰€æœ‰ç±»å‹æ£€æŸ¥å¿…é¡»é€šè¿‡
- **ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•** - ä½¿ç”¨ Mocha é…ç½®äº†æµ‹è¯•åŸºç¡€è®¾æ–½
- **æ›´æ–°æ–‡æ¡£** - æ–°åŠŸèƒ½åŒ…å« README æ›´æ–°
- **ä½¿ç”¨ Winston è¿›è¡Œæ—¥å¿—è®°å½•** - éµå¾ªç°æœ‰æ—¥å¿—æ¨¡å¼

### è´¡çŒ®é¢†åŸŸ

- é¢å¤–ä»£ç†ç±»å‹æ”¯æŒ
- æ›´å¤šè¾“å‡ºæ ¼å¼ (XML, YAML)
- Web UI æˆ–ä»ªè¡¨æ¿
- æ€§èƒ½ä¼˜åŒ–
- é¢å¤–é˜²å±è”½ç­–ç•¥
- æµ‹è¯•è¦†ç›–ç‡æ”¹è¿›

## ğŸ† è´¡çŒ®è€… (Contributors)

- [@qiusli](https://github.com/qiusli)
- [@Eddie104](https://github.com/Eddie104)
- [@leongfeng](https://github.com/leongfeng)

## ğŸ”„ æ‰‹åŠ¨å‘å¸ƒæµç¨‹ (Manual Release)

é¡¹ç›®ç°åœ¨ä½¿ç”¨æ‰‹åŠ¨å‘å¸ƒæµç¨‹ï¼Œå¼€å‘è€…åœ¨æœ¬åœ°è¿è¡Œ `npm version` å‘½ä»¤æ¥ç”Ÿæˆç‰ˆæœ¬å’Œæ ‡ç­¾ï¼Œç„¶å GitHub Actions ä¼šåœ¨æ£€æµ‹åˆ°æ–°æ ‡ç­¾æ—¶è‡ªåŠ¨å‘å¸ƒåˆ° npm å’Œ GitHub Releasesï¼š

- **æ‰‹åŠ¨ç‰ˆæœ¬ç®¡ç†**: é€šè¿‡ `npm version` å‘½ä»¤æ‰‹åŠ¨æ›´æ–°ç‰ˆæœ¬å·ï¼ˆmajor/minor/patchï¼‰
- **è‡ªåŠ¨ç”Ÿæˆ CHANGELOG**: åœ¨ç‰ˆæœ¬æ›´æ–°æ—¶è‡ªåŠ¨ç”Ÿæˆ CHANGELOG.md
- **è‡ªåŠ¨å‘å¸ƒåˆ° GitHub**: æ¨é€æ ‡ç­¾åè‡ªåŠ¨åˆ›å»º GitHub Release
- **è‡ªåŠ¨å‘å¸ƒåˆ° npm**: æ¨é€æ ‡ç­¾åè‡ªåŠ¨å‘å¸ƒåˆ° npm registry

#### ğŸ“ ç‰ˆæœ¬å‘å¸ƒå‘½ä»¤ (Release Commands)

ä»¥ä¸‹æ˜¯å‘å¸ƒä¸åŒç‰ˆæœ¬ç±»å‹çš„å‘½ä»¤ï¼š

```bash
# æ–°åŠŸèƒ½ - è§¦å‘ minor ç‰ˆæœ¬å‡çº§ (0.8.4 â†’ 0.9.0)
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"

# é”™è¯¯ä¿®å¤ - è§¦å‘ patch ç‰ˆæœ¬å‡çº§ (0.8.4 â†’ 0.8.5)
git commit -m "fix: ä¿®å¤äº†æŸä¸ªé—®é¢˜"

# é‡å¤§å˜æ›´ - è§¦å‘ major ç‰ˆæœ¬å‡çº§ (0.8.4 â†’ 1.0.0)
git commit -m "feat: é‡æ„API\n\nBREAKING CHANGE: æ—§APIå·²å¼ƒç”¨"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: æ›´æ–°README"

# æ„å»ºç›¸å…³
git commit -m "build: æ›´æ–°æ„å»ºé…ç½®"

# æµ‹è¯•ç›¸å…³
git commit -m "test: æ·»åŠ å•å…ƒæµ‹è¯•"
```

#### ğŸš€ å‘å¸ƒæµç¨‹

1. ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
   ```bash
   npm test
   ```
2. è¿è¡Œç‰ˆæœ¬å‘å¸ƒå‘½ä»¤ï¼ˆé€‰æ‹©é€‚å½“çš„ç‰ˆæœ¬ç±»å‹ï¼‰
   ```bash
   npm run release:patch  # æˆ– minor/major
   ```
3. æ¨é€æ ‡ç­¾å’Œä»£ç åˆ°è¿œç¨‹ä»“åº“
   ```bash
   git push --follow-tags
   ```
4. GitHub Actions ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°æ–°æ ‡ç­¾å¹¶æ‰§è¡Œå‘å¸ƒæµç¨‹

> **æ³¨æ„**: æ‰€æœ‰å¼€å‘å·¥å…·éƒ½ä½œä¸ºæœ¬åœ°ä¾èµ–ç®¡ç†ï¼Œæ— éœ€å®‰è£…å…¨å±€åŒ…ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯æˆæƒã€‚

## ğŸ’¬ æ”¯æŒ

- **Issues**: [GitHub Issues](https://github.com/raawaa/jav-scrapy/issues)
- **è®¨è®º**: [GitHub Discussions](https://github.com/raawaa/jav-scrapy/discussions)
- **é‚®ç®±**: é€šè¿‡ GitHub è”ç³»

## ğŸ™ è‡´è°¢

- **Cheerio** HTML è§£æ
- **Axios** HTTP è¯·æ±‚
- **Puppeteer** æµè§ˆå™¨è‡ªåŠ¨åŒ–
- **Winston** æ—¥å¿—è®°å½•
- **Commander.js** CLI æ¡†æ¶
- **TypeScript** ç±»å‹å®‰å…¨
